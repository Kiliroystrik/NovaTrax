<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Page de Planification des Tournées</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      .container {
        display: flex;
        height: 100vh;
      }
      .sidebar {
        width: 250px;
        background-color: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
      }
      .sidebar h2 {
        text-align: center;
        margin-bottom: 30px;
      }
      .main {
        flex: 1;
        padding: 20px;
        overflow-y: auto;
      }
      .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 10px;
      }
      .calendar div {
        padding: 10px;
        border: 1px solid #bdc3c7;
        text-align: center;
        cursor: pointer;
      }
      .calendar .header {
        background-color: #34495e;
        color: #ecf0f1;
        font-weight: bold;
      }
      .calendar .has-deliveries {
        background-color: #1abc9c;
        color: #fff;
      }
      .deliveries {
        margin-top: 30px;
      }
      .deliveries h3 {
        margin-bottom: 15px;
      }
      .delivery-item {
        border: 1px solid #bdc3c7;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 4px;
      }
      .actions {
        margin-top: 20px;
      }
      .actions button {
        padding: 10px 15px;
        margin-right: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .btn-primary {
        background-color: #3498db;
        color: #fff;
      }
      .btn-secondary {
        background-color: #95a5a6;
        color: #fff;
      }
      /* Modale */
      .modal {
        display: none; /* Caché par défaut */
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
      }
      .modal-content {
        background-color: #fff;
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 400px;
        border-radius: 4px;
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .close {
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
      }
      .modal-footer {
        text-align: right;
        margin-top: 20px;
      }
      .modal-footer button {
        padding: 8px 12px;
        margin-left: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .btn-save {
        background-color: #2ecc71;
        color: #fff;
      }
      .btn-cancel {
        background-color: #e74c3c;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Sidebar -->
      <div class="sidebar">
        <h2>Planification</h2>
        <p>Navigation rapide :</p>
        <ul>
          <li>
            <a href="#" style="color: #ecf0f1; text-decoration: none"
              >Calendrier</a
            >
          </li>
          <li>
            <a href="#" style="color: #ecf0f1; text-decoration: none"
              >Livraisons</a
            >
          </li>
          <li>
            <a href="#" style="color: #ecf0f1; text-decoration: none"
              >Tournées</a
            >
          </li>
        </ul>
      </div>

      <!-- Main Content -->
      <div class="main">
        <!-- Calendrier -->
        <h1>Calendrier de Planification</h1>
        <div class="calendar">
          <!-- Headers des jours de la semaine -->
          <div class="header">Lun</div>
          <div class="header">Mar</div>
          <div class="header">Mer</div>
          <div class="header">Jeu</div>
          <div class="header">Ven</div>
          <div class="header">Sam</div>
          <div class="header">Dim</div>

          <!-- Exemple de dates -->
          <!-- Vous pouvez ajuster les dates en fonction du mois actuel -->
          <div>27</div>
          <div>28</div>
          <div>29</div>
          <div>30</div>
          <div>1</div>
          <div class="has-deliveries">2</div>
          <div>3</div>

          <div>4</div>
          <div class="has-deliveries">5</div>
          <div>6</div>
          <div>7</div>
          <div>8</div>
          <div>9</div>
          <div>10</div>

          <div>11</div>
          <div>12</div>
          <div class="has-deliveries">13</div>
          <div>14</div>
          <div>15</div>
          <div>16</div>
          <div>17</div>

          <div>18</div>
          <div>19</div>
          <div>20</div>
          <div>21</div>
          <div>22</div>
          <div>23</div>
          <div>24</div>

          <div>25</div>
          <div>26</div>
          <div>27</div>
          <div>28</div>
          <div>29</div>
          <div>30</div>
          <div>31</div>
        </div>

        <!-- Liste des Livraisons -->
        <div class="deliveries">
          <h3>Livraisons du <span id="selected-date">2 Octobre 2024</span></h3>
          <div class="delivery-item">
            <p><strong>Livraison #1</strong></p>
            <p>Adresse : 123 Rue Exemple, Paris</p>
            <p>Status : En attente</p>
          </div>
          <div class="delivery-item">
            <p><strong>Livraison #2</strong></p>
            <p>Adresse : 456 Avenue Test, Lyon</p>
            <p>Status : En cours</p>
          </div>
          <!-- Ajouter plus de livraisons ici -->
        </div>

        <!-- Actions -->
        <div class="actions">
          <button class="btn-primary" onclick="openModal('associate')">
            Associer à une Tournée Existante
          </button>
          <button class="btn-secondary" onclick="openModal('create')">
            Créer une Nouvelle Tournée
          </button>
        </div>
      </div>
    </div>

    <!-- Modale pour Associer à une Tournée Existante -->
    <div id="associateModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Associer à une Tournée Existante</h2>
          <span class="close" onclick="closeModal('associate')">&times;</span>
        </div>
        <div class="modal-body">
          <label for="existingTour">Sélectionnez une tournée :</label>
          <select id="existingTour" class="input input-bordered w-full mt-2">
            <option value="" disabled selected>Sélectionnez une tournée</option>
            <option value="1">Tournée #1</option>
            <option value="2">Tournée #2</option>
            <!-- Ajouter plus d'options de tournées ici -->
          </select>
        </div>
        <div class="modal-footer">
          <button class="btn-save" onclick="associateTour()">Associer</button>
          <button class="btn-cancel" onclick="closeModal('associate')">
            Annuler
          </button>
        </div>
      </div>
    </div>

    <!-- Modale pour Créer une Nouvelle Tournée -->
    <div id="createModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Créer une Nouvelle Tournée</h2>
          <span class="close" onclick="closeModal('create')">&times;</span>
        </div>
        <div class="modal-body">
          <form id="createTourForm">
            <div class="mb-3">
              <label for="tourNumber">Numéro de Tournée :</label>
              <input
                type="text"
                id="tourNumber"
                class="input input-bordered w-full"
                required
              />
            </div>
            <div class="mb-3">
              <label for="tourStatus">Statut :</label>
              <select
                id="tourStatus"
                class="select select-bordered w-full"
                required
              >
                <option value="" disabled selected>
                  Sélectionnez un statut
                </option>
                <option value="1">En attente</option>
                <option value="2">En cours</option>
                <option value="3">Terminée</option>
                <!-- Ajouter plus d'options de statuts ici -->
              </select>
            </div>
            <div class="mb-3">
              <label for="tourDriver">Conducteur :</label>
              <select
                id="tourDriver"
                class="select select-bordered w-full"
                required
              >
                <option value="" disabled selected>
                  Sélectionnez un conducteur
                </option>
                <option value="1">Jean Dupont</option>
                <option value="2">Marie Curie</option>
                <!-- Ajouter plus d'options de conducteurs ici -->
              </select>
            </div>
            <div class="mb-3">
              <label for="tourVehicle">Véhicule :</label>
              <select
                id="tourVehicle"
                class="select select-bordered w-full"
                required
              >
                <option value="" disabled selected>
                  Sélectionnez un véhicule
                </option>
                <option value="1">Véhicule A</option>
                <option value="2">Véhicule B</option>
                <!-- Ajouter plus d'options de véhicules ici -->
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-save" onclick="createTour()">Créer</button>
          <button class="btn-cancel" onclick="closeModal('create')">
            Annuler
          </button>
        </div>
      </div>
    </div>

    <script>
      // Fonction pour ouvrir une modale
      function openModal(type) {
        if (type === "associate") {
          document.getElementById("associateModal").style.display = "block";
        } else if (type === "create") {
          document.getElementById("createModal").style.display = "block";
        }
      }

      // Fonction pour fermer une modale
      function closeModal(type) {
        if (type === "associate") {
          document.getElementById("associateModal").style.display = "none";
        } else if (type === "create") {
          document.getElementById("createModal").style.display = "none";
        }
      }

      // Fonction pour associer une tournée
      function associateTour() {
        const selectedTour = document.getElementById("existingTour").value;
        if (selectedTour) {
          alert(`Livraisons associées à la Tournée #${selectedTour}`);
          closeModal("associate");
          // Ici, vous ajouteriez la logique pour associer les livraisons au backend
        } else {
          alert("Veuillez sélectionner une tournée.");
        }
      }

      // Fonction pour créer une nouvelle tournée
      function createTour() {
        const tourNumber = document.getElementById("tourNumber").value;
        const tourStatus = document.getElementById("tourStatus").value;
        const tourDriver = document.getElementById("tourDriver").value;
        const tourVehicle = document.getElementById("tourVehicle").value;

        if (tourNumber && tourStatus && tourDriver && tourVehicle) {
          alert(`Nouvelle Tournée Créée : ${tourNumber}`);
          closeModal("create");
          // Ici, vous ajouteriez la logique pour créer la tournée dans le backend
        } else {
          alert("Veuillez remplir tous les champs.");
        }
      }

      // Exemple de sélection de date dans le calendrier
      const calendarDays = document.querySelectorAll(
        ".calendar div:not(.header)"
      );
      const selectedDateSpan = document.getElementById("selected-date");

      calendarDays.forEach((day) => {
        day.addEventListener("click", () => {
          // Mettre à jour la date sélectionnée (exemple statique)
          selectedDateSpan.textContent = `${day.textContent} Octobre 2024`;
          // Mettre à jour la liste des livraisons (statique pour ce template)
          // Dans une application réelle, vous chargeriez les livraisons via le backend
        });
      });
    </script>
  </body>
</html>
