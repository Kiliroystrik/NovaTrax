<!-- order.component.html -->
@if (order) {
<div class="container mx-auto p-4">
    <!-- Informations de la commande -->
    <div class="card bg-base-100 shadow-xl mb-6">
        <div class="card-body">
            <h2 class="card-title text-3xl font-bold mb-4">
                Commande #{{ order.orderNumber }}
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p>
                        <span class="font-semibold">Client :</span> {{ order.client.name }}
                    </p>
                    <p>
                        <span class="font-semibold">Date de commande :</span>
                        {{ order.orderDate | date:'dd/MM/yyyy' }}
                    </p>
                    <p>
                        @if (order.expectedDeliveryDate) {
                        <span class="font-semibold">Date de livraison prévue :</span>
                        {{ order.expectedDeliveryDate | date:'dd/MM/yyyy' }}
                        }@else {
                        <span class="font-semibold">Date de livraison :</span>
                        Non planifiée
                        }
                    </p>
                    <p>
                        <span class="font-semibold">Statut : </span>
                        <span class="badge {{ getStatusColor(order.status) }}">
                            {{ order.status }}
                        </span>
                    </p>
                </div>
                <!-- Vous pouvez ajouter d'autres informations ici -->
            </div>
        </div>
    </div>

    <!-- Liste des livraisons -->
    <div class="mb-6">
        <h3 class="text-2xl font-bold mb-4">Livraisons</h3>
        <div class="space-y-4">
            @for (delivery of order.deliveries; track delivery.id) {
            <div class="collapse collapse-arrow border border-base-300 bg-base-100 rounded-box">
                <input type="checkbox" />
                <div class="collapse-title text-xl font-medium">
                    Livraison #{{ delivery.id }} - {{ delivery.geocodedAddress.city }} - {{
                    delivery.expectedDeliveryDate | date:'dd/MM/yyyy' }}
                </div>
                <div class="collapse-content">
                    <!-- Détails de la livraison -->
                    <p>
                        <span class="font-semibold">Statut : </span>
                        <span class="badge {{ getStatusColor(delivery.status) }}">
                            {{ delivery.status }}
                        </span>
                    </p>
                    <p>
                        <span class="font-semibold">Date de livraison attendue :</span>
                        {{ delivery.expectedDeliveryDate | date:'dd/MM/yyyy' }}
                    </p>
                    <p>
                        <span class="font-semibold">Date de livraison réelle :</span>
                        {{ delivery.actualDeliveryDate | date:'dd/MM/yyyy' }}
                    </p>
                    <p>
                        <span class="font-semibold">Adresse de livraison :</span>
                        {{ delivery.geocodedAddress.fullAddress }}
                    </p>

                    <!-- Tableau des produits livrés -->
                    <div class="overflow-x-auto mt-4">
                        <table class="table w-full">
                            <thead>
                                <tr>
                                    <th>Produit</th>
                                    <th>Description</th>
                                    <th>Quantité</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (productDelivery of delivery.productDeliveries; track productDelivery.id) {
                                <tr>
                                    <td>{{ productDelivery.product.name }}</td>
                                    <td>{{ productDelivery.product.description }}</td>
                                    <td>{{ productDelivery.quantity }} {{ productDelivery.product.unitOfMeasure.name }}
                                    </td>
                                </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            }
        </div>
    </div>

    <!-- Actions -->
    <div class="flex justify-end mt-4">
        <button class="btn btn-primary mr-2">Modifier</button>
        <button class="btn btn-secondary">Annuler</button>
    </div>
</div>
} @else {
<div class="alert alert-warning">
    <span>Aucune commande disponible.</span>
</div>
}