<!-- Bouton pour ouvrir la modale de création de clients -->
<div class="flex justify-between mb-4">
    <h2 class="text-xl font-bold">Liste des clients</h2>
    <button class="btn btn-primary" (click)="openModal()">Nouveau client</button>
</div>

<div class="overflow-x-auto">
    <table class="table w-full">
        <thead>
            <tr>
                <th>Nom du client</th>
                <th>Détails</th>
            </tr>
        </thead>
        <tbody>
            @for (client of clients; track client.id) {
            <tr class="hover:bg-base-200">
                <td>{{ client.name }}</td>
                <td><button class="btn btn-primary btn-xs" [routerLink]="['/clients', client.id]">Détails</button>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>

<!-- Pagination -->
<div class="flex justify-center mt-4">
    <div class="btn-group">
        <!-- Précédent -->
        <button class="btn" [disabled]="currentPage === 1" (click)="goToPage(currentPage - 1)">Précédent</button>

        <!-- Première page (toujours affichée) -->
        <button class="btn" [class.btn-active]="currentPage === 1" (click)="goToPage(1)">1</button>

        <!-- Ellipsis si la page courante est loin de la première page -->
        @if (currentPage > 3) {
        <ng-container>
            <button class="btn btn-disabled">...</button>
        </ng-container>
        }

        <!-- Pages proches de la page actuelle (de currentPage-2 à currentPage+2) -->
        @for (page of getPagesAroundCurrent(); track $index) {
        <ng-container>
            <button class="btn" [class.btn-active]="page === currentPage" (click)="goToPage(page)">
                {{ page }}
            </button>
        </ng-container>
        }

        <!-- Ellipsis si la page courante est loin de la dernière page -->
        @if (currentPage < totalPages - 2) { <ng-container>
            <button class="btn btn-disabled">...</button>
            </ng-container>
            }

            <!-- Dernière page (toujours affichée si plus d'une page) -->
            @if (totalPages > 1) {
            <ng-container>
                <button class="btn" [class.btn-active]="currentPage === totalPages" (click)="goToPage(totalPages)">
                    {{ totalPages }}
                </button>
            </ng-container>
            }

            <!-- Suivant -->
            <button class="btn" [disabled]="currentPage === totalPages"
                (click)="goToPage(currentPage + 1)">Suivant</button>
    </div>
</div>

<!-- Modale pour la création d'une commande -->
<dialog id="clientCreationModal" class="modal modal-bottom sm:modal-middle">
    <div class="modal-box">
        <h3 class="text-lg font-bold">Créer un nouveau client</h3>
        <!-- <app-client-form (submitForm)="onOrderFormSubmit($event)"></app-client-form> -->
        <div class="modal-action">
            <button class="btn btn-secondary" (click)="closeModal()">Annuler</button>
        </div>
    </div>
</dialog>